{"remainingRequest":"D:\\Projects\\blog_admin\\node_modules\\babel-loader\\lib\\index.js!D:\\Projects\\blog_admin\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\Projects\\blog_admin\\src\\utils\\request.js","dependencies":[{"path":"D:\\Projects\\blog_admin\\src\\utils\\request.js","mtime":1571579374858},{"path":"D:\\Projects\\blog_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\blog_admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Projects\\blog_admin\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import axios from 'axios';\nimport store from '@/store';\nvar service = axios.create({\n  baseURL: 'http://localhost:8080',\n  // baseURL: 'https://easy-mock.com/mock/5d00c05a1c7f40720e804ade/example',\n  timeout: 5000\n});\nservice.interceptors.request.use(function (config) {\n  if (store.state.user.token) {\n    config.headers.Authorization = \"Bearer \".concat(store.state.user.token);\n  }\n\n  return config;\n}, function (error) {\n  console.log(error);\n  return Promise.reject(error);\n});\nservice.interceptors.response.use(function (response) {\n  return Promise.resolve(response);\n}, function (error) {\n  var httpError = {\n    status: error.response.status,\n    statusText: error.response.statusText\n  };\n  store.dispatch('http/setHttpError', httpError).then(function () {\n    return Promise.reject(error);\n  });\n});\nexport default service;",{"version":3,"sources":["D:\\Projects\\blog_admin\\src\\utils\\request.js"],"names":["axios","store","service","create","baseURL","timeout","interceptors","request","use","config","state","user","token","headers","Authorization","error","console","log","Promise","reject","response","resolve","httpError","status","statusText","dispatch","then"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AAEA,IAAMC,OAAO,GAAGF,KAAK,CAACG,MAAN,CAAa;AAC3BC,EAAAA,OAAO,EAAE,uBADkB;AAE3B;AACAC,EAAAA,OAAO,EAAE;AAHkB,CAAb,CAAhB;AAMAH,OAAO,CAACI,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CAAiC,UAAAC,MAAM,EAAI;AACzC,MAAIR,KAAK,CAACS,KAAN,CAAYC,IAAZ,CAAiBC,KAArB,EAA4B;AAC1BH,IAAAA,MAAM,CAACI,OAAP,CAAeC,aAAf,oBAAyCb,KAAK,CAACS,KAAN,CAAYC,IAAZ,CAAiBC,KAA1D;AACD;;AACD,SAAOH,MAAP;AACD,CALD,EAKG,UAAAM,KAAK,EAAI;AACVC,EAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,SAAOG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CARD;AAUAb,OAAO,CAACI,YAAR,CAAqBc,QAArB,CAA8BZ,GAA9B,CAAkC,UAAAY,QAAQ,EAAI;AAC5C,SAAOF,OAAO,CAACG,OAAR,CAAgBD,QAAhB,CAAP;AACD,CAFD,EAEG,UAAAL,KAAK,EAAI;AACV,MAAMO,SAAS,GAAG;AAChBC,IAAAA,MAAM,EAAER,KAAK,CAACK,QAAN,CAAeG,MADP;AAEhBC,IAAAA,UAAU,EAAET,KAAK,CAACK,QAAN,CAAeI;AAFX,GAAlB;AAIAvB,EAAAA,KAAK,CAACwB,QAAN,CAAe,mBAAf,EAAoCH,SAApC,EAA+CI,IAA/C,CAAoD,YAAM;AACxD,WAAOR,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,GAFD;AAGD,CAVD;AAYA,eAAeb,OAAf","sourcesContent":["import axios from 'axios'\r\nimport store from '@/store'\r\n\r\nconst service = axios.create({\r\n  baseURL: 'http://localhost:8080',\r\n  // baseURL: 'https://easy-mock.com/mock/5d00c05a1c7f40720e804ade/example',\r\n  timeout: 5000\r\n})\r\n\r\nservice.interceptors.request.use(config => {\r\n  if (store.state.user.token) {\r\n    config.headers.Authorization = `Bearer ${store.state.user.token}`\r\n  }\r\n  return config\r\n}, error => {\r\n  console.log(error)\r\n  return Promise.reject(error)\r\n})\r\n\r\nservice.interceptors.response.use(response => {\r\n  return Promise.resolve(response)\r\n}, error => {\r\n  const httpError = {\r\n    status: error.response.status,\r\n    statusText: error.response.statusText\r\n  }\r\n  store.dispatch('http/setHttpError', httpError).then(() => {\r\n    return Promise.reject(error)\r\n  })\r\n})\r\n\r\nexport default service\r\n"]}]}